# 数仓用户

数仓用户是在数仓服务单元中操作和使用数据库对象的实体。他们可以在特定的服务单元中创建、管理和使用数据库对象。在 Relyt 中，数仓用户只能由账号扮演或通过邀请创建。这种设计不仅便于使用数仓服务单元，还实现了数仓服务单元之间的有效资源隔离，从而确保你的数据安全，同时又不影响其简洁性。

## 数仓用户类型

在 Relyt 中，数仓用户只能由账号扮演或通过邀请创建。基于他们的功能，数仓用户可以被分类为以下两种类型：

- 账号扮演

- 邀请创建

下表对两种类型的数仓用户进行了比较。

| 功能 | 账号扮演 | 邀请创建 |
| :- | :- | :- |
| 管理 DPS 集群 | 支持 | 不支持 |
| 数仓用户创建邀请 | 支持 | 不支持 |
| 删除数仓用户 | 支持，只能删除由自己邀请创建的数仓用户 | 不支持 |
| 终止连接 | 支持，可以终止自己以及来自其邀请创建的数仓用户的连接 | 支持，可以终止自己的连接 |
| 管理数据库对象 | 支持 | 支持 |

<br/>

如上表所示，所有的数仓用户都可以管理数据库对象。但是当数仓用户管理数据库对象时，为保证数据安全，Relyt 对数仓用户针对数据库对象的读写权限进行了严格的管理和控制。

## 数据库对象的操作权限

数仓服务单元中的数仓用户可以查看服务单元中的所有数据库对象。但是，由于拥有权限不同，数仓用户在某具体数据库对象上的管理权限存在差异。

**数据库**

所有的数仓用户都可以创建数据库。然而，只有数据库的所有者才能删除数据库。请注意，一旦数据库被删除，数据库的所有目录条目以及包含数据的目录都会被删除。

**Schema**

所有数据库默认有一个名为 `public` 的 Schema。所有数仓用户都拥有在任一 `public` 中创建数据库对象的权限。`public` 中的数据库对象对所有数仓用户均可见，但只能由其所有者修改或删除。

只有数据库的所有者才能在数据库中创建 Schema。只有 Schema 的所有者才能修改或删除 Schema。


**表、视图、函数**

只有表（包括外部表）、视图、函数（包括存储过程）的所有者有权限进行修改、删除操作。


**权限授予**

被授予特定权限的数仓用户可以对数据库对象执行特定操作。例如，被授予 Schema `USAGE` 权限的数仓用户可以访问 Schema 中包含的所有对象。


:::warning 重要
- 数仓用户**只能授予其拥有的权限给其他用户**。假设数仓用户 `user_A` 是 Schema `schema_a` 的所有者，而 `schema_a` 有两个表 `table_1` 和 `table_2`。`table_1` 是数仓用户 `user_A` 的，而 `table_2` 是数仓用户 `user_B` 的。数仓用户 `user_A` 只能将 `table_1` 的所有者转让给其他数仓用户，但不能改变 `table_2` 的所有权，尽管数仓用户 `user_A` 可以访问 `table_2`。
- 为提升数据安全，**权限授予不能跨级**。假设数仓用户 `user_B` 是 Schema `schema_b` 的所有者。`schema_b` 中存在多个表。当 `user_B` 将 `schema_b` 的 `ALL` 权限授予 `user_C` 后， `user_C` 拥有的只是 Schema 级的所有权限（`CREATE`、`USAGE`），而非 Schema 中表的权限。
:::

关于对象权限的详细信息，请参考 [对象权限](guides/security/object-privileges.md)。关于权限授予和撤回的 SQL 操作，请参考 [GRANT](reference/sql-commands/grant.md) 和 [REVOKE](reference/sql-commands/revoke.md)。



