---
sidebar_position: 3
description: "单查询成功率不低于 99.9%"
---

# 自适应查询扩展 AQS

AQS（自适应查询扩展，Adaptive Query Scaling）是 Relyt 提供的一项高级功能，旨在确保你的 DPS 集群在处理大查询、复杂查询期间的稳定性和高性能，提供了至少三个 9 的查询成功率。

## 概述

AQS 能在运行时自动识别大型查询，并将它们发送到 AQS 共享计算资源池中进行处理，不会对当前运行在 DPS 集群的工作负载产生任何影响，从而保证了集群的稳定运行。

启用 AQS 后，符合以下任一情况的查询将会被识别为大型查询：

- 由于资源限制（如“not enough memory”）导致当前 DPS 集群无法正常运行的查询

- 查询运行会影响当前 DPS 集群的性能

## 使用注意事项

AQS 功能本身不会产生费用。只有当 AQS 共享计算资源被用于处理大查询时，你才需要为真实使用了的计算资源付费。

AQS 始终选择最有效的计算资源量来处理你的大型查询。然而，为了帮助你更好地管理你的云预算，AQS 要求你在为 DPS 集群启用 AQS 时，设置 AQS 可使用的共享计算资源的上限，控制 AQS 从共享资源池中分配的最大计算资源。

使用 AQS 时，请注意以下限制：

- 目前，只能为 Extreme DPS 集群启用 AQS。

- AQS 只能在创建 DPS 集群时启用。如果你想为已有的 DPS 集群启用该功能，需要先删除当前集群并重新创建。

- AQS 是集群级的功能。如需在多个 DPS 集群上启用该功能，需要在创建这些 DPS 集群时，分别为每一个集群启用。


## 启用 AQS

在创建 Extreme DPS 集群时，你可以为集群启用 AQS。

1. 登录 Relyt 控制台并连接到目标数仓服务单元或直接登录目标数仓服务单元。

2. 在左侧边栏中，选择 **DPS 集群**。

3. 点击 **+ DPS 集群**，进入 **创建 DPS 集群** 页面。

4. 完成 DPS 集群相关配置。具体来说，展开 **高级选项** 区域，打开 **自适应查询扩展** 设置开关，并设置可用来处理路由大查询的额外计算资源的上限。

    关于 DPS 集群其他配置，请参考 [管理DPS 集群](manage-dps-clusters.md) 中“创建 DPS 集群”部分的参数说明。

5. 点击**创建**。

Extreme DPS 集群创建成功后，AQS 自动生效。

